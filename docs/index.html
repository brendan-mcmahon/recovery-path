<!DOCTYPE html>
<html>
  <head>
    <title>Recovery Path</title>
    <link rel="stylesheet" type="text/css" href="index.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;900&family=Quicksand:wght@300;500;700&family=Raleway:wght@100;400;700&display=swap"
      rel="stylesheet"
    />
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;800&display=swap" rel="stylesheet" />
  </head>

  <body>
    <h1>Recovery Path</h1>

    <div class="inputs">
      <div class="input">
        <h2>Previous</h2>
        <label for="length1" class="length">
          Length (cm)
          <input name="length1" type="number" pattern="[0-9]*" inputmode="decimal" id="length1" oninput="calculate()" />
        </label>

        <span class="x">&#10005;</span>
        <label for="width1" class="width">
          Width (cm)
          <input
            name="width1"
            type="number"
            pattern="[0-9]*"
            inputmode="decimal"
            id="width1"
            class="width"
            oninput="calculate()"
          />
        </label>
        <hr />
        <p id="area1" class="area">-cm&sup2;</p>
      </div>

      <div class="input">
        <h2>Current</h2>
        <label for="length2" class="length">
          Length (cm)
          <input name="length2" type="number" pattern="[0-9]*" inputmode="decimal" id="length2" oninput="calculate()" />
        </label>
        <span class="x">&#10005;</span>
        <label for="width2" class="width">
          Width (cm)
          <input type="number" pattern="[0-9]*" inputmode="decimal" id="width2" oninput="calculate()" />
        </label>
        <hr />
        <p id="area2" class="area">-cm&sup2;</p>
      </div>
    </div>

    <div class="results">
      <h3 id="diff-label">Diff</h3>
      <h3 id="diff-percent-label">Diff %</h3>
      <h3 id="change-label">Change %</h3>

      <p class="number" id="diff">- cm&sup2;</p>
      <p class="number" id="diff-percent">- %</p>
      <p class="number" id="change">- %</p>

      <div class="vertical" id="v1"></div>
      <div class="vertical" id="v2"></div>
    </div>

    <script>

      function calculateArea(index) {
        var length = document.getElementById(`length${index}`).value;
        var width = document.getElementById(`width${index}`).value;
        
        var area = length * width;
        document.getElementById(`area${index}`).innerHTML = length1 && width1 ? area.toFixed(2) + " cm&sup2;" : "- cm&sup2;";
        return area;
      }

      function calculate() {
        var area1 = calculateArea(1);
        var area2 = calculateArea(2);

        if (area1 && area2) {
          var difference = Math.abs(area1 - area2);
          var percentageDifference = (Math.abs(area2 - area1) / ((area1 + area2) / 2)) * 100;
          var percentageChange = ((area2 - area1) / area1) * 100;

          document.getElementById("diff").innerHTML = difference.toFixed(2) + " cm&sup2;";
          document.getElementById("diff-percent").innerHTML = percentageDifference.toFixed(2) + "%";
          document.getElementById("change").innerHTML = percentageChange.toFixed(2) + "%";
        } else {
          document.getElementById("diff").innerHTML = "- cm&sup2;";
          document.getElementById("diff-percent").innerHTML = "- %";
          document.getElementById("change").innerHTML = "- %";
        }
      }
    </script>
  </body>
</html>
